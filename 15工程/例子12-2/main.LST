C51 COMPILER V9.53.0.0   MAIN                                                              02/15/2015 17:19:04 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "reg51.h"
   2          #include "stdio.h"
   3          #include "led1602.h"
   4          #define ADC_POWER     0x80
   5          #define ADC_FLAG      0x10
   6          #define ADC_START     0x08
   7          #define ADC_SPEEDLL   0x00
   8          #define ADC_SPEEDL    0x20
   9          #define ADC_SPEEDH    0x40
  10          #define ADC_SPEEDHH   0x60
  11          
  12          sfr AUXR      =0x8E;
  13          sfr ADC_CONTR =0xBC;
  14          sfr ADC_RES   =0xBD;
  15          sfr ADC_RESL  =0xBE;
  16          sfr P1ASF     =0x9D;
  17          
  18          unsigned char ch=4;
  19          bit flag=1;
  20          float voltage=0;
  21          unsigned char tstr[5];
  22          unsigned int tmp=0;
  23          void adc_int() interrupt 5
  24          {
  25   1        unsigned char i=0;
  26   1        ADC_CONTR &=!ADC_FLAG;
  27   1        tmp=(ADC_RES*4+ADC_RESL);
  28   1        voltage=(tmp*5.0)/1024;
  29   1        sprintf(tstr,"%1.4f",voltage);
  30   1        flag=1;
  31   1        ADC_CONTR=ADC_POWER |ADC_SPEEDLL | ADC_START | ch;
  32   1      }
  33          
  34          void main()
  35          {
  36   1        unsigned int i;
  37   1        P0M0=0;
  38   1        P0M1=0;
  39   1        P2M0=0;
  40   1        P2M1=0;
  41   1        P1ASF=0xFF;
  42   1        ADC_RES=0;
  43   1        ADC_CONTR=ADC_POWER|ADC_SPEEDLL | ADC_START | ch;
  44   1        for(i=0;i<10000;i++);
  45   1        IE=0xA0;
  46   1        lcdwait();
  47   1        lcdinit();
  48   1        lcdshowstr(0,0,"Measured Voltage is");
  49   1        lcdshowstr(6,1,"V");
  50   1        while(1)
  51   1          { 
  52   2            if(flag==1)
  53   2            {
  54   3              flag=0;
  55   3              lcdshowstr(0,1,tstr);
C51 COMPILER V9.53.0.0   MAIN                                                              02/15/2015 17:19:04 PAGE 2   

  56   3            }
  57   2          }
  58   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    239    ----
   CONSTANT SIZE    =     28    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
